(this["webpackJsonppixel-art"]=this["webpackJsonppixel-art"]||[]).push([[0],{238:function(e,t,n){},39:function(e){e.exports=JSON.parse('{"a":"http://localhost:3002/api"}')},459:function(e,t,n){},461:function(e,t,n){},476:function(e,t,n){},477:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(19),i=n(36),c=n(30),s=n(239),o=n.n(s),l=n(22),d=n(25),u=n(28),j=n(27),b=n(16),p=n(11),m=n(99),h=n(6),f=n.n(h),x=n(17),O=n(240),v=n(39),g=n(80),w=n.n(g),y="localData",S=function(){var e,t=localStorage.getItem(y),n=t&&JSON.parse(null!==(e=localStorage.getItem(y))&&void 0!==e?e:"null");return t&&n.token};w.a.defaults.headers.common["x-auth-token"]=S&&S(),w.a.interceptors.response.use(void 0,(function(e){if(e.response&&e.response.status>=403){b.b.error("We are sorry, but unexpected error occurred :(",{position:"top-center",autoClose:3e3})}return Promise.reject(e)}));var N={get:w.a.get,post:w.a.post,put:w.a.put,patch:w.a.patch,delete:w.a.delete},k="localData";function _(){try{var e=JSON.parse(localStorage.getItem(k)||"null");return Object(p.a)(Object(p.a)({},Object(O.a)(e.token)),{},{name:e.name})}catch(t){return null}}function C(e){return D.apply(this,arguments)}function D(){return(D=Object(x.a)(f.a.mark((function e(t){var n,a,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.next=3,N.post("".concat(v.a,"/auth"),{email:n,password:a});case 3:r=e.sent,(i=r.data).isPainter||b.b.success("Logging in...",{position:"top-center",autoClose:2e3}),localStorage.setItem(k,JSON.stringify(i));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return P.apply(this,arguments)}function P(){return(P=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem(k);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return N.get("".concat(v.a,"/users/me"))}function A(e){return N.patch("".concat(v.a,"/users/add-favorite"),{favorites:[e]})}function z(e){return N.patch("".concat(v.a,"/users/delete-favorite"),{favorites:[e]})}var M=n(1),F=function(e){var t=e.component,n=e.render,a=e.painter,r=Object(m.a)(e,["component","render","painter"]),i=_();return Object(M.jsx)(c.b,Object(p.a)(Object(p.a)({},r),{},{render:function(e){return!i||a&&!i.painter?(b.b.error(Object(M.jsxs)("p",{className:"text-center",children:["Sorry, you need a `painter` account to access this page. ",Object(M.jsx)("br",{}),"Feel free to create your own and start creating!"]}),{position:"top-center",autoClose:4e3}),Object(M.jsx)(c.a,{to:{pathname:"/sign-in",state:{from:e.location}}})):t?Object(M.jsx)(t,Object(p.a)({},e)):(null===n||void 0===n?void 0:n(e))||null}}))},U=n(112),E=n(97),L=n(29),q=n.n(L),B=n(58),R=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).schema=void 0,e.doSubmit=void 0,e.convert2image=void 0,e.handleSubmit=function(){var t=Object(x.a)(f.a.mark((function t(n){var a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!e.state.grid){t.next=7;break}return b.b.dark("One moment please",{position:"top-center",autoClose:2500}),t.next=5,e.convert2image();case 5:a=t.sent,e.setState({dataUrl:a});case 7:r=e.validate(),e.setState({errors:r||{}}),null!==r&&(null===r||void 0===r?void 0:r.grid)&&b.b.error("Canvas can not be blank",{position:"top-center",autoClose:2500}),r||e.doSubmit();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.validateProperty=function(t,n){var a=q.a.object(Object(U.a)({},t,e.schema[t])),r=Object(U.a)({},t,n),i=a.validate(r,{abortEarly:!1}).error;return i?i.details[0].message:null},e.validate=function(){var t=Object(E.a)(e),n=t.state.formData,a=t.schema,r=q.a.object(a).validate(n,{abortEarly:!1}).error;if(!r)return null;var i={};return r.details.forEach((function(e){var t=e.path,n=e.message;i[t[0]]=n})),i},e.handleChange=function(t){var n=t.target,a=n.value,r=n.name,i=e.state,c=i.errors,s=i.formData,o=Object(p.a)({},c)||{},l=e.validateProperty(r,a);o[r]=l;var d=Object(p.a)({},s);d[r]=a,e.setState({formData:d,errors:o})},e.renderInput=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{val:void 0},i=Object.assign({},r),c=e.state,s=c.formData,o=c.errors;return Object(M.jsx)(he,Object(p.a)({error:o&&o[t],label:n,name:t,onChange:e.handleChange,type:a,value:s[t]},i))},e}return Object(d.a)(n,[{key:"renderButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(M.jsx)("div",{className:"text-center",children:Object(M.jsx)(B.Button,{className:"btn-block p-button-outlined p-button-rounded",disabled:this.validate(),label:e,type:"submit"})})}}]),n}(a.Component),H=n(31),G=n(68),Y=n(247),J=n.n(Y),V=n(271),W=n(242),K=n(243),Q=n(244),X=n(245),Z=n(246),$=n(581),ee=n(579),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:35;return Array(Math.pow(e,2)).fill("").map((function(e,t){return{fill:t%2===0?"lightgrey":"white",touched:""}}))};function ne(e){return N.post("".concat(v.a,"/drawings"),e)}function ae(){return N.get("".concat(v.a,"/drawings/my-drawings"))}function re(e){try{return N.get("".concat(v.a,"/drawings/").concat(e))}catch(t){return console.error(t),t}}function ie(e){try{return N.delete("".concat(v.a,"/drawings/").concat(e))}catch(t){return console.error(t),t}}function ce(e){try{var t=e._id,n=Object(m.a)(e,["_id"]);return N.put("".concat(v.a,"/drawings/").concat(t),n)}catch(a){return console.error(a),a}}var se=function(e){var t=e.eventType,n=e.handler;return Object(a.useEffect)((function(){return t.forEach((function(e,t,a){var r=e,i=t;!0===e&&(r=a[0]),!0===n[i]&&(i=0),window.addEventListener(r,n[i])})),function(){t.forEach((function(e,t,a){var r=e,i=t;!0===e&&(r=a[0]),!0===n[i]&&(i=0),window.removeEventListener(r,n[i])}))}}),[]),null},oe=function e(){var t=this;Object(l.a)(this,e),this.drawStart=!1,this.newGrid=void 0,this.canCallBack=!1,this.callback=function(){},this.isMouseDown=!1,this.handleMouseDown=function(){t.isMouseDown=!0},this.handleMouseUp=function(){t.isMouseDown=!1,t.callback()},this.cleanup=function(){window.removeEventListener("pointerdown",t.handleMouseDown),window.removeEventListener("pointerup",t.handleMouseUp)},window.addEventListener("pointerdown",this.handleMouseDown),window.addEventListener("pointerup",this.handleMouseUp)};var le=function(e){e.preventDefault()},de=Object(a.forwardRef)((function(e,t){var n=e.fillAction,r=e.grid,i=e.currentColor,c=e.addedStyle,s=Math.sqrt(r.length),o=Object(a.useRef)(),l=Object(a.useRef)([]),d=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"",keycode:0};o.current.drawStart=!1,o.current.canCallBack=!1,"keyup"===a.type&&13!==a.keyCode||(null===(t=o.current)||void 0===t?void 0:t.isMouseDown)||n(e)};Object(a.useEffect)((function(){o.current=new oe;var e=o.current;return e.callback=function(){e.newGrid=l.current.map((function(e){return{fill:e.style.backgroundColor,touched:e.dataset.touched}})),e.canCallBack&&d(e.newGrid)},t.current.addEventListener("touchmove",le),function(){e.callback=function(){},e.cleanup()}}),[]);var u=function(e,t){var n,a;if("pointerdown"===t.type){if(t.target.releasePointerCapture(t.pointerId),3===t.which||2===t.button)return;o.current.drawStart=!0}var r,c,u,j,b=l.current;"keydown"===t.type&&(t.keyCode>36&&t.keyCode<41&&(37===t.keyCode?null===(r=b[e-1>=0?e-1:e])||void 0===r||r.focus():38===t.keyCode?null===(c=b[e-s>=0?e-s:e])||void 0===c||c.focus():39===t.keyCode?null===(u=b[e+1>=0?e+1:e])||void 0===u||u.focus():40===t.keyCode&&(null===(j=b[e+s>=0?e+s:e])||void 0===j||j.focus()),t.preventDefault()));b[e].style.backgroundColor===i||!("pointerenter"!==t.type||(null===(n=o.current)||void 0===n?void 0:n.isMouseDown)&&(null===(a=o.current)||void 0===a?void 0:a.drawStart))||"keydown"===t.type&&13!==t.keyCode||(b[e].style.backgroundColor=i,b[e].dataset.touched||(b[e].dataset.touched="true"),o.current.canCallBack=!0,"keydown"===t.type&&d(b.map((function(e){return{fill:e.style.backgroundColor,touched:e.dataset.touched}}))))};return Object(M.jsx)("div",{className:"paintGrid",ref:t,style:{gridTemplateColumns:"repeat(".concat(s,", minmax(1px, 1fr))"),gridTemplateRows:"repeat(".concat(s,", minmax(1px, 1fr))")},children:r.map((function(e,t,n){return Object(M.jsx)("div",{"aria-label":"fill square",className:"square","data-touched":e.touched,onKeyDown:function(e){return u(t,e)},onPointerDown:function(e){return u(t,e)},onPointerEnter:function(e){return u(t,e)},ref:function(e){return a=e,0===(n=t)&&(l.current=[]),void(l.current[n]=a);var n,a},role:"button",style:Object(p.a)({backgroundColor:e.fill},c),tabIndex:0},(a=t,r=n.length,"".concat(Math.floor(a/Math.sqrt(r)),",").concat(Math.floor(a%Math.sqrt(r)))));var a,r}))})})),ue=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e)).gridRef=r,i.convert2image=Object(x.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.gridRef.current,Array.from(t.children).forEach((function(e){!e.dataset.touched&&(e.style.backgroundColor="transparent"),e.style.border="none"})),t.style.minWidth="175px",t.style.minHeight="175px",t.style.width="175px",t.style.height="175px",e.abrupt("return",Object(V.a)(t,{backgroundColor:"transparent",style:{margin:"auto",width:"100%",height:"100%"},width:t.offsetWidth,height:t.offsetHeight,pixelRatio:1,skipFonts:!0}));case 7:case"end":return e.stop()}}),e)}))),i.schema={drawingName:q.a.string().min(2).max(26).required().label("Drawing Name"),description:q.a.string().min(2).max(225).required().label("Description"),grid:q.a.array().min(225).max(1225).required().label("canvas"),dataUrl:q.a.string().required().label("src")},i.validate=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(E.a)(i),n=t.state,a=n.formData,r=n.grid,c=n.dataUrl,s=t.schema,o=s.drawingName,l=s.description,d=s._id,u={drawingName:o,description:l};d&&(u._id=d),r&&e?(a.grid=Object(G.a)(r).filter((function(e){return e.touched})),u.grid=i.schema.grid,a.dataUrl=c,u.dataUrl=i.schema.dataUrl):delete a.grid&&delete a.dataUrl;var j=q.a.object(u).validate(a,{abortEarly:!1}),b=j.error;if(!b)return null;var p={};return b.details.forEach((function(e){var t=e.path,n=e.message;p[t[0]]=n})),p},i.handleFill=function(e){var t=i.state,n=t.currentStateIndex,a=t.canvasStateTimeline;i.setState({grid:e,currentStateIndex:n+1,canvasStateTimeline:[].concat(Object(G.a)(a.slice(0,n+1)),[e]),isInitial:!1})},i.handleChangeComplete=function(e){var t=e.r,n=e.g,a=e.b;i.setState({currentColor:"rgb(".concat([t,n,a].join(", "),")")})},i.handleNumberChange=function(e){var t=+e.value;if(!(t<15||t>35)){var n=Array(Math.pow(t,2)).fill("").map((function(e,t){return{fill:t%2===0?"lightgrey":"white",touched:""}})),a=[n];i.setState({grid:n,canvasStateTimeline:a,currentStateIndex:0,isInitial:!0})}},i.handleUndo=function(){var e=i.state,t=e.canvasStateTimeline,n=e.currentStateIndex,a=e.grid;if(!(n<1)){var r=Math.sqrt(a.length),c=n-1;i.setState({grid:t[c],canvasStateTimeline:Object(G.a)(t),currentStateIndex:c,isInitial:JSON.stringify(t[c])===JSON.stringify(te(r))})}},i.handleRedo=function(){var e=i.state,t=e.canvasStateTimeline,n=e.currentStateIndex,a=e.grid;if(n!==t.length-1){var r=Math.sqrt(a.length),c=n+1;i.setState({grid:t[c],canvasStateTimeline:Object(G.a)(t),currentStateIndex:c,isInitial:JSON.stringify(t[c])===JSON.stringify(te(r))})}},i.handleReset=function(){if(!i.state.isInitial){var e=i.state,t=e.currentStateIndex,n=e.canvasStateTimeline,a=e.grid,r=Math.sqrt(a.length);i.setState({grid:te(r),currentStateIndex:t+1,canvasStateTimeline:[].concat(Object(G.a)(n.slice(0,t+1)),[te(r)]),isInitial:!0})}},i.handleGridOff=function(e){var t=i.state,n=t.grid,a=t.gateKeep;if(e)i.setState({addedStyle:{border:"none"},grid:n.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{fill:e.touched?e.fill:"transparent"})})),gateKeep:!1});else if(!a){var r=i.state,c=r.currentStateIndex,s=r.canvasStateTimeline;i.setState({addedStyle:{border:"1px solid #00000065"},grid:s[c]})}},i.gridRef=Object(a.createRef)(),i}return Object(d.a)(n,[{key:"renderSizePicker",value:function(){var e=this,t=this.state.grid,n=Math.sqrt(t.length),a={step:2,min:15,max:35,value:n,format:!0,readOnly:!0};return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)("div",{className:"p-grid p-fluid",children:Object(M.jsxs)("div",{className:" p-field p-col-12",children:[Object(M.jsx)("label",{htmlFor:"gridSize",children:"Grid Size (15x15 - 35x35)"}),Object(M.jsx)(K.InputNumber,Object(p.a)({buttonLayout:"horizontal",decrementButtonClassName:" p-button-outlined p-button-danger",decrementButtonIcon:"pi pi-minus",id:"gridSize",incrementButtonClassName:" p-button-outlined p-button-info",incrementButtonIcon:"pi pi-plus",name:"gridSize",onChange:function(t){return e.handleNumberChange(t)},showButtons:!0,suffix:"x".concat(n)},a))]})})})}},{key:"renderPaintCanvas",value:function(){var e=this,t=this.state.currentColor;return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(de,{addedStyle:this.state.addedStyle,currentColor:t,fillAction:function(t){return e.handleFill(t)},grid:this.state.grid,ref:this.gridRef})})}},{key:"renderTools",value:function(){var e,t,n=this,a=new Z.Subject;a.pipe(Object($.a)(100),Object(ee.a)(1)).subscribe((function(e){n.handleChangeComplete(e)}));var r=null===this||void 0===this||null===(e=this.state)||void 0===e||null===(t=e.currentColor)||void 0===t?void 0:t.match(/[0-9]{1,3}/g),i=Object(H.a)(r,3),c=i[0],s=i[1],o=i[2],l={color:"rgb(".concat([c,s,o].join(", "),")"),filter:"drop-shadow(0 0 2px white) invert(1) grayscale(1) contrast(4)"};return Object(M.jsx)(Q.ScrollPanel,{className:"sp contain mx-auto p-card",style:{height:"58px"},children:Object(M.jsxs)("div",{className:"tools p-2",children:[Object(M.jsxs)("div",{className:"leftContents d-flex align-items-center justify-content-start",children:[Object(M.jsx)(B.Button,{"aria-label":"undo",className:"p-button-rounded p-button p-button-text",icon:"pi pi-replay",onClick:this.handleUndo}),Object(M.jsx)(B.Button,{"aria-label":"redo",className:"p-button-rounded p-button p-button-text",icon:"pi pi-refresh",onClick:this.handleRedo}),Object(M.jsxs)("div",{className:"p-float-label p-overlay-badge",children:[Object(M.jsx)(W.ColorPicker,{appendTo:this.gridRef.current,format:"rgb",onChange:function(e){var t,n=e.value;return!isNaN(n.r)&&(t=n,void a.next(t))},value:{r:c,g:s,b:o}}),Object(M.jsx)(X.Badge,{style:{backgroundColor:l.color,boxShadow:"0 0 1px 1px",filter:"drop-shadow(0 0 2px white)"}}),Object(M.jsx)("label",{className:"pi pi-palette",style:Object(p.a)({transform:"scale(1.8)"},l)})]})]}),Object(M.jsxs)("div",{className:"rightContents d-flex align-content-center justify-content-around",children:[Object(M.jsx)(B.Button,{"aria-label":"reset",className:"p-button-rounded p-button-text p-button-danger",label:"Clear",onClick:this.handleReset,children:Object(M.jsx)(J.a,{})}),Object(M.jsx)(B.Button,{"aria-label":"see results",className:"p-button-rounded p-button-text p-button-success",icon:"pi pi-eye",label:"Demo",onPointerDown:function(){return n.handleGridOff(!0)},children:Object(M.jsx)(se,{eventType:["pointerup","touchend"],handler:[function(){return n.handleGridOff(!1)},!0]})})]})]})})}}]),n}(R);n(270),n(5);var je=n(255),be=n(145),pe=n(256),me=n(257),he=function(e){var t=e.name,n=e.label,r=e.error,i=Object(m.a)(e,["name","label","error"]),c=Object(a.useState)(""),s=Object(H.a)(c,2),o=s[0],l=s[1],d=Object(M.jsx)("h6",{children:"Pick a password"}),u=Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(je.Divider,{}),Object(M.jsx)("p",{className:"p-mt-2",children:"Requirements"}),Object(M.jsx)("div",{className:"p-pl-2 p-ml-2 p-mt-0",style:{lineHeight:"1.5"},children:Object(M.jsx)("span",{children:" - Minimum 6 characters"})})]}),j=i.feedback;return Object(M.jsxs)("div",{className:"my-4 p-fluid",children:["password"===i.type?Object(M.jsxs)("span",{className:"p-float-label p-field",children:[Object(M.jsx)(me.Password,Object(p.a)({feedback:j,footer:j&&u,header:j&&d,id:t,name:t,onInput:function(e){return l(e.target.value)},toggleMask:!0,value:o},i)),Object(M.jsx)("label",{htmlFor:t,children:n})]}):"textarea"===i.type?Object(M.jsxs)("span",{className:"p-float-label p-field",children:[Object(M.jsx)(pe.InputTextarea,Object(p.a)({autoResize:!0,id:t,name:t,rows:1},i)),Object(M.jsx)("label",{htmlFor:t,style:{width:"90%"},children:n})]}):Object(M.jsxs)("span",{className:"p-float-label p-field",children:[Object(M.jsx)(be.InputText,Object(p.a)({id:t,name:t,type:"text"},i)),Object(M.jsx)("label",{htmlFor:t,style:{width:"90%"},children:n})]}),r&&Object(M.jsx)("span",{className:"text-danger",children:r})]})},fe=function(e){var t=e.titleText;return Object(M.jsx)("div",{className:"row text-center",children:Object(M.jsx)("div",{className:"col-12 mt-4",children:Object(M.jsx)("h1",{children:t})})})},xe=n(258),Oe=n(519),ve=n(577),ge=(n(459),Object(xe.a)([2,6],["#ff008c","#ccc"])),we=Object(xe.a)([0,15],[15,0]),ye=function(e){var t=e.renderInput,n=e.maxLength,r=e.label,i=e.currentValue,c=Object(a.useState)(i||""),s=Object(H.a)(c,2),o=s[0],l=s[1],d=n-o.length,u=Object(Oe.a)();Object(a.useEffect)((function(){d>10||u.start({scale:1,transition:{type:"spring",velocity:we(d)}})}),[o.length]);var j=Object(M.jsxs)("div",{className:"motion-container",children:[Object(M.jsx)("div",{children:r}),!!o.length&&Object(M.jsx)("div",{children:Object(M.jsxs)(ve.a.div,{animate:u,style:{color:ge(d),display:"inline-block"},children:["\xa0",d]})})]});return Object(M.jsx)("div",{className:"input-container",children:t({onInput:function(e){return l(e.target.value.length>n?o.substring(0,n):e.target.value)},value:o,label:j,maxLength:n})})},Se=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={addedStyle:{border:"1px solid #00000065"},gateKeep:!0,canvasStateTimeline:[te()],currentStateIndex:0,formData:{drawingName:"",description:""},errors:{},grid:te(),currentColor:"rgb(63, 81, 181)",isInitial:!0,dataUrl:""},e.doSubmit=Object(x.a)(f.a.mark((function t(){var n,a,r,i,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.formData,r=n.grid,i=n.dataUrl,c=Object(p.a)(Object(p.a)({},a),{},{grid:r,dataUrl:i}),t.next=4,ne(c);case 4:b.b.success("A new drawing was created",{position:"top-center",autoClose:2500}),e.props.history.replace("/my-drawings");case 6:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(M.jsxs)("div",{children:[Object(M.jsx)(fe,{titleText:"Create pixel art"}),Object(M.jsxs)("div",{className:"row text-center",children:[Object(M.jsx)("div",{className:"col-12",children:Object(M.jsx)("p",{children:"Lets make a new drawing!"})}),this.renderPaintCanvas()]}),this.renderTools(),Object(M.jsx)("div",{className:"container",children:Object(M.jsx)("div",{className:"row",children:Object(M.jsx)("div",{className:" m-auto",children:Object(M.jsx)("form",{className:"p-card",noValidate:!0,onSubmit:function(t){if(e.state.isInitial)return t.preventDefault(),void b.b.error("Canvas can not be blank",{position:"top-center",autoClose:2500});e.handleSubmit(t)},children:Object(M.jsxs)("div",{className:"p-card-content m-3",children:[this.renderSizePicker(),Object(M.jsx)(ye,{label:"Name",maxLength:26,renderInput:function(t){return e.renderInput("drawingName","","text",Object(p.a)({},t))}}),Object(M.jsx)(ye,{label:"Description",maxLength:225,renderInput:function(t){return e.renderInput("description","","textarea",Object(p.a)({},t))}}),this.renderButton("Create Drawing")]})})})})})]})}}]),n}(ue),Ne=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={addedStyle:{border:"1px solid #00000065"},gateKeep:!0,canvasStateTimeline:[],currentStateIndex:0,formData:{_id:"",drawingName:"",description:""},errors:{},grid:[],currentColor:"rgb(63, 81, 181)",isInitial:!1,dataUrl:""},e.mapToState=function(e){return{drawingName:e.drawingName,description:e.description,grid:e.grid,_id:e._id}},e.doSubmit=Object(x.a)(f.a.mark((function t(){var n,a,r,i,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.formData,r=n.grid,i=n.dataUrl,c=Object(p.a)(Object(p.a)({},a),{},{grid:r,dataUrl:i}),t.next=4,ce(c);case 4:b.b.success("Drawing was updated",{position:"top-center",autoClose:2500}),e.props.history.replace("/my-drawings");case 6:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(x.a)(f.a.mark((function e(){var t,n,a,r,i,c,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.schema._id=q.a.string(),e.prev=1,e.next=4,re(this.props.match.params.id);case 4:t=e.sent,n=t.data,a=this.mapToState(n),r=a.drawingName,i=a.description,c=a.grid,s=a._id,o=c.map((function(e){return{fill:e.fill,touched:e.touched}})),this.setState({formData:{drawingName:r,description:i,_id:s},grid:o,canvasStateTimeline:[o],isInitial:!1}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.grid,a=t.formData,r=a.drawingName,c=a.description;return a._id&&Object(M.jsxs)("div",{children:[Object(M.jsx)(fe,{titleText:"Edit drawing"}),Object(M.jsxs)("div",{className:"row text-center",children:[Object(M.jsx)("div",{className:"col-12",children:Object(M.jsx)("p",{children:"Edit your drawing"})}),n.length?this.renderPaintCanvas():Object(M.jsx)("div",{className:"m-auto text-info",children:"LOADING..."})]}),this.renderTools(),Object(M.jsx)("div",{className:"container",children:Object(M.jsx)("div",{className:"row",children:Object(M.jsx)("div",{className:" m-auto",children:Object(M.jsx)("form",{className:"p-card",noValidate:!0,onSubmit:function(t){if(e.state.isInitial)return t.preventDefault(),void b.b.error("Canvas can not be blank",{position:"top-center",autoClose:2500});e.handleSubmit(t)},children:Object(M.jsxs)("div",{className:"p-card-content m-3",children:[this.renderSizePicker(),Object(M.jsx)(ye,{currentValue:r,label:"Name",maxLength:26,renderInput:function(t){return e.renderInput("drawingName","",void 0,Object(p.a)({},t))}}),Object(M.jsx)(ye,{currentValue:c,label:"Description",maxLength:225,renderInput:function(t){return e.renderInput("description","","textarea",Object(p.a)({},t))}}),Object(M.jsx)("div",{className:"text-center mx-5 my-3",children:Object(M.jsx)(i.b,{className:"btn btn-block btn-danger",to:"/my-drawings",children:"Cancel"})}),this.renderButton("Update Drawing")]})})})})})]})}}]),n}(ue),ke=Object(a.createContext)([]),_e=n(571),Ce=n(265),De=n(584),Ie=n(56);var Pe=n(272),Te=n(79),Ae=n(149),ze=n(578);function Me(e,t,n){e.isAnimating()||e.start((function(a){var r=Object(ze.a)({from:t,to:n,velocity:e.getVelocity(),stiffness:400,damping:40,onUpdate:function(t){return e.set(t)},onComplete:a});return function(){return r.stop()}}))}var Fe=Object(Ae.a)(Me,100);var Ue=function(e,t,n,a,r){Object(Te.b)(e,"wheel",r&&function(e){e.preventDefault();var r=t.get(),i=r-e.deltaY,c=!1,s=n&&i>=n.top&&i<=n.bottom;n&&!s&&((i=Object(Pe.a)(r,i,.2))<n.top&&(e.deltaY<=5?(Me(t,i,n.top),c=!0):Fe(t,i,n.top)),i>n.bottom&&(e.deltaY>=-5?(Me(t,i,n.bottom),c=!0):Fe(t,i,n.bottom))),c?Fe.cancel():t.set(i),a()},{passive:!1})},Ee={type:"spring",stiffness:200,damping:30},Le={type:"spring",stiffness:300,damping:30},qe={zIndex:2},Be={stiffness:300,transitionEnd:{zIndex:0}},Re=Object(a.memo)((function(e){var t=e.description,n=e.painterInfo,a=n.name;return Object(M.jsxs)("div",{className:"content-container",children:[n&&Object(M.jsxs)("div",{className:"d-flex justify-content-between mx-2",children:[Object(M.jsxs)("span",{children:["By: ",a]}),Object(M.jsx)(B.Button,{className:"mx-1 p-button-rounded p-button-text p-button-lg d-inline-block",icon:"pi pi-user",label:"See profile",onClick:function(){}})]}),Object(M.jsx)("p",{children:t})]})})),He=function(e){var t=e.isSelected,n=e.src;return Object(M.jsx)(ve.a.div,{animate:t?qe:Be,className:"d-card-image-container",layout:!0,children:Object(M.jsx)(ve.a.img,{alt:"drawing thumbnail",animate:t?qe:Be,className:"d-card-image",layout:!0,loading:"lazy",onError:function(e){e.target.src="https://socialistmodernism.com/wp-content/uploads/2017/07/placeholder-image-300x225.png"},src:n})})},Ge=n(260),Ye=n(574),Je=n(586),Ve=n(575),We=n(576),Ke=n(263),Qe=n.n(Ke),Xe=n(262),Ze=n.n(Xe),$e=n(587),et=n(583),tt=n(588),nt=n(104),at=n(580),rt=n(573),it=n(572),ct=n(585),st=n(569),ot=n(520),lt=n(521),dt=n(522),ut=n(523),jt=n(524),bt=n(525),pt=n(526),mt=n(527),ht=n(528),ft=n(529),xt=n(530),Ot=n(531),vt=n(532),gt=n(533),wt=n(534),yt=n(535),St=n(536),Nt=n(537),kt=n(538),_t=n(539),Ct=n(540),Dt=n(541),It=n(542),Pt=n(543),Tt=n(544),At=n(545),zt=n(546),Mt=n(547),Ft=n(548),Ut=n(549),Et=n(550),Lt=n(551),qt=n(552),Bt=n(553),Rt=n(554),Ht=n(555),Gt=n(556),Yt=n(557),Jt=n(558),Vt=n(559),Wt=n(560),Kt=n(561),Qt=n(562),Xt=n(563),Zt=n(564),$t=n(565),en=n(566),tn=n(567),nn=n(568),an=(n(461),function(e){var t=e.shareUrl,n="PaintHub";return Object(M.jsxs)("div",{className:"Share__container",children:[Object(M.jsxs)("div",{className:"Share__some-network",children:[Object(M.jsx)(ot.a,{className:"Share__some-network__share-button",quote:n,url:t,children:Object(M.jsx)(lt.a,{round:!0,size:32})}),Object(M.jsx)("div",{children:Object(M.jsx)(dt.a,{className:"Share__some-network__share-count",url:t,children:function(e){return e}})})]}),Object(M.jsx)("div",{className:"Share__some-network",children:Object(M.jsx)(ut.a,{appId:"521270401588372",className:"Share__some-network__share-button",url:t,children:Object(M.jsx)(jt.a,{round:!0,size:32})})}),Object(M.jsxs)("div",{className:"Share__some-network",children:[Object(M.jsx)(bt.a,{className:"Share__some-network__share-button",title:n,url:t,children:Object(M.jsx)(pt.a,{round:!0,size:32})}),Object(M.jsx)("div",{className:"Share__some-network__share-count",children:"\xa0"})]}),Object(M.jsxs)("div",{className:"Share__some-network",children:[Object(M.jsx)(mt.a,{className:"Share__some-network__share-button",title:n,url:t,children:Object(M.jsx)(ht.a,{round:!0,size:32})}),Object(M.jsx)("div",{className:"Share__some-network__share-count",children:"\xa0"})]}),Object(M.jsxs)("div",{className:"Share__some-network",children:[Object(M.jsx)(ft.a,{className:"Share__some-network__share-button",separator:":: ",title:n,url:t,children:Object(M.jsx)(xt.a,{round:!0,size:32})}),Object(M.jsx)("div",{className:"Share__some-network__share-count",children:"\xa0"})]}),Object(M.jsx)("div",{className:"Share__some-network",children:Object(M.jsx)(Ot.a,{className:"Share__some-network__share-button",url:t,children:Object(M.jsx)(vt.a,{round:!0,size:32})})}),Object(M.jsxs)("div",{className:"Share__some-network",children:[Object(M.jsx)(gt.a,{className:"Share__some-network__share-button",media:"".concat(String(window.location),"/"),url:String(window.location),children:Object(M.jsx)(wt.a,{round:!0,size:32})}),Object(M.jsx)("div",{children:Object(M.jsx)(yt.a,{className:"Share__some-network__share-count",url:t})})]}),Object(M.jsxs)("div",{className:"Share__some-network",children:[Object(M.jsx)(St.a,{className:"Share__some-network__share-button",image:"".concat(String(window.location),"/"),url:t,children:Object(M.jsx)(Nt.a,{round:!0,size:32})}),Object(M.jsx)("div",{children:Object(M.jsx)(kt.a,{className:"Share__some-network__share-count",url:t})})]}),Object(M.jsxs)("div",{className:"Share__some-network",children:[Object(M.jsx)(_t.a,{className:"Share__some-network__share-button",image:"".concat(String(window.location),"/"),url:t,children:Object(M.jsx)(Ct.a,{round:!0,size:32})}),Object(M.jsx)("div",{children:Object(M.jsx)(Dt.a,{className:"Share__some-network__share-count",url:t})})]}),Object(M.jsxs)("div",{className:"Share__some-network",children:[Object(M.jsx)(It.a,{className:"Share__some-network__share-button",title:n,url:t,windowHeight:460,windowWidth:660,children:Object(M.jsx)(Pt.a,{round:!0,size:32})}),Object(M.jsx)("div",{children:Object(M.jsx)(Tt.a,{className:"Share__some-network__share-count",url:t})})]}),Object(M.jsxs)("div",{className:"Share__some-network",children:[Object(M.jsx)(At.a,{className:"Share__some-network__share-button",title:n,url:t,children:Object(M.jsx)(zt.a,{round:!0,size:32})}),Object(M.jsx)("div",{children:Object(M.jsx)(Mt.a,{className:"Share__some-network__share-count",url:t})})]}),Object(M.jsx)("div",{className:"Share__some-network",children:Object(M.jsx)(Ft.a,{className:"Share__some-network__share-button",description:t,title:n,url:t,children:Object(M.jsx)(Ut.a,{round:!0,size:32})})}),Object(M.jsx)("div",{className:"Share__some-network",children:Object(M.jsx)(Et.a,{className:"Share__some-network__share-button",title:n,url:t,children:Object(M.jsx)(Lt.a,{round:!0,size:32})})}),Object(M.jsx)("div",{className:"Share__some-network",children:Object(M.jsx)(qt.a,{body:"body",className:"Share__some-network__share-button",subject:n,url:t,children:Object(M.jsx)(Bt.a,{round:!0,size:32})})}),Object(M.jsx)("div",{className:"Share__some-network",children:Object(M.jsx)(Rt.a,{className:"Share__some-network__share-button",title:n,url:t,children:Object(M.jsx)(Ht.a,{round:!0,size:32})})}),Object(M.jsx)("div",{className:"Share__some-network",children:Object(M.jsx)(Gt.a,{className:"Share__some-network__share-button",quote:n,url:t,children:Object(M.jsx)(Yt.a,{round:!0,size:32})})}),Object(M.jsx)("div",{className:"Share__some-network",children:Object(M.jsx)(Jt.a,{className:"Share__some-network__share-button",title:n,url:t,children:Object(M.jsx)(Vt.a,{round:!0,size:32})})}),Object(M.jsx)("div",{className:"Share__some-network",children:Object(M.jsx)(Wt.a,{className:"Share__some-network__share-button",image:"".concat(String(window.location),"/"),title:n,url:t,children:Object(M.jsx)(Kt.a,{round:!0,size:32})})}),Object(M.jsx)("div",{className:"Share__some-network",children:Object(M.jsx)(Qt.a,{className:"Share__some-network__share-button",title:n,url:t,children:Object(M.jsx)(Xt.a,{round:!0,size:32})})}),Object(M.jsx)("div",{className:"Share__some-network",children:Object(M.jsx)(Zt.a,{className:"Share__some-network__share-button",title:n,url:t,children:Object(M.jsx)($t.a,{round:!0,size:32})})}),Object(M.jsxs)("div",{className:"Share__some-network",children:[Object(M.jsx)(en.a,{className:"Share__some-network__share-button",title:n,url:t,windowHeight:460,windowWidth:660,children:Object(M.jsx)(tn.a,{round:!0,size:32})}),Object(M.jsx)("div",{children:Object(M.jsx)(nn.a,{className:"Share__some-network__share-count",url:t})})]})]})}),rn=Object(a.forwardRef)((function(e,t){return Object(M.jsx)(st.a,Object(p.a)({direction:"up",ref:t},e))})),cn=function(e){var t=e.title,n=e.emitClose,r=e.dataUrl,i=Object(a.useState)(!0),c=Object(H.a)(i,2),s=c[0],o=c[1];return Object(M.jsx)("div",{children:Object(M.jsxs)(at.a,{"aria-describedby":"alert-dialog-slide-description","aria-labelledby":"alert-dialog-slide-title",keepMounted:!0,onClose:function(){o(!1),setTimeout((function(){n()}),150)},open:s,TransitionComponent:rn,children:[Object(M.jsx)(ct.a,{id:"alert-dialog-slide-title",children:t}),Object(M.jsx)(it.a,{children:Object(M.jsx)(an,{shareUrl:"https://nevehallon.github.io/Pixel-Paint/#/public-images/?data=".concat(encodeURIComponent(r))})}),Object(M.jsx)(rt.a,{})]})})},sn=Object(Ye.a)((function(e){return Object(Je.a)({speedDial:{position:"absolute",bottom:e.spacing(1),right:e.spacing(2),"& .MuiSpeedDial-actions .MuiSpeedDialAction-staticTooltip .MuiSpeedDialAction-staticTooltipLabel":{width:"max-content !important"}}})}));function on(e){var t=e.emitOpen,n=e.emitClose,r=e.emitFavoriteAction,i=e.id,c=e.drawingNumber,s=e.dataUrl,o=e.history,l=e.basePath,d=sn(),u=Object(a.useState)(!1),j=Object(H.a)(u,2),p=j[0],m=j[1],h=Object(a.useState)(!1),O=Object(H.a)(h,2),v=O[0],g=O[1],w=Object(a.useContext)(ke),y=Object(Ge.a)(s),S=Object(H.a)(y,2),N=(S[0],S[1]),k=function(){n(),m(!1)},C=[{icon:Object(M.jsx)(Ze.a,{}),name:"Info",handleAction:function(){o.push("".concat(l,"/").concat(i))}},{icon:Object(M.jsx)(nt.d,{size:24}),name:"Fork",handleAction:function(){var e=Object(x.a)(f.a.mark((function e(){var t,n,a,r,c,s,l,d,u,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_();case 3:if(t=e.sent,t.painter){e.next=8;break}return b.b.error(Object(M.jsxs)("p",{className:"text-center",children:["Sorry, you need a `painter` account to fork a drawing. ",Object(M.jsx)("br",{}),"Feel free to create your own and start creating!"]}),{position:"top-center",autoClose:4e3}),e.abrupt("return");case 8:return e.next=10,re(i);case 10:return n=e.sent,a=n.data,r=a.grid,c=a.dataUrl,s=a.drawingName,l=a.description,d={drawingName:"".concat(s.substring(0,15),"...(forked)"),description:"".concat(l.substring(0,214),"...(forked)"),grid:r,dataUrl:c},e.next=19,ne(d);case 19:u=e.sent,j=u.data._id,b.b.success("Drawing Forked!",{position:"top-center",autoClose:2500}),o.replace("/edit/".concat(j)),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),console.error(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}()},{icon:Object(M.jsx)(Ve.a,{}),name:"Share",handleAction:function(){g(!0)}},{icon:w.includes(c)?Object(M.jsx)(nt.b,{size:24}):Object(M.jsx)(nt.a,{size:24}),name:w.includes(c)?"Remove from Favorites":"Save to Favorites",handleAction:function(){r(!w.includes(c)),w.includes(c)?b.b.dark("Removed from Favorites",{position:"top-center"}):b.b.success("Saved to Favorites",{position:"top-center"})}},{icon:Object(M.jsx)(Qe.a,{}),name:"Download Image",handleAction:function(){!function(e,t){var n=document.createElement("a");n.href=e,n.setAttribute("download",t),n.click()}(s,"".concat(i,".png"))}},{icon:Object(M.jsx)(nt.e,{size:24}),name:"Copy Image Link",handleAction:function(){N(),b.b.success(Object(M.jsxs)("span",{children:[Object(M.jsx)(nt.c,{className:"mr-5",size:24})," Copied to Clipboard!"]}),{position:"top-center"})}},{icon:Object(M.jsx)(We.a,{}),name:"Open in New Window",handleAction:function(){var e=new Image,t=document.createElement("div");t.setAttribute("style","height:100%;display:grid;justify-content:center;align-content:center;"),e.src=s,t.appendChild(e);var n=window.open("");null===n||void 0===n||n.document.write(t.outerHTML)}}];return Object(M.jsxs)("div",{children:[Object(M.jsx)($e.a,{ariaLabel:"SpeedDial tooltip",className:d.speedDial,direction:"up",icon:Object(M.jsx)(tt.a,{}),onClose:k,onOpen:function(){t(),m(!0)},open:p,children:C.map((function(e){return Object(M.jsx)(et.a,{icon:e.icon,onClick:function(){var t;null===(t=e.handleAction)||void 0===t||t.call(e),k()},tooltipOpen:!0,tooltipPlacement:"left",tooltipTitle:e.name},e.name)}))}),v&&Object(M.jsx)(cn,{dataUrl:s,emitClose:function(){return g(!1)},title:"Choose an Option"})]})}var ln=function(e){var t=e.title,n=e.isSelected;return Object(M.jsx)(ve.a.div,{animate:n?qe:Be,className:"title-container",children:Object(M.jsx)("h2",{children:t})})},dn=Object(a.memo)((function(e){var t=e.isSelected,n=e.onDelete,r=e.onFavoriteAction,s=e._id,o=e.drawingName,l=e.description,d=e.dataUrl,u=e.drawingNumber,j=e.painterInfo,b=Object(a.useState)(!1),p=Object(H.a)(b,2),m=p[0],h=p[1],f=Object(c.g)(),x=Object(Ce.a)(0),O=[0,t?1:0,0],v=Object(De.a)(x,[-500,0,500],O),g=Object(a.useRef)(null),w=function(e,t){var n=Object(a.useState)({top:0,bottom:0}),r=Object(H.a)(n,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){if(t){var n=e.current,a=window.innerHeight,r=n.offsetTop,i=n.offsetHeight,s=a-2*r,o=Math.min(s-i,0);c({top:o,bottom:0})}}),[t]),i}(g,t),y=n?"my-drawings":"my-favorites";function S(){var e=x.get();(e>100||e<-100)&&f.go(-1)}var N=Object(a.useRef)(null);return Ue(N,x,w,S,t),Object(M.jsxs)("li",{className:"d-card",ref:N,children:[Object(M.jsx)(ve.a.div,{className:"overlay",style:{opacity:v,pointerEvents:t?"auto":"none"},transition:{duration:.2,delay:.1},children:Object(M.jsx)(i.b,{replace:!0,to:"/".concat(y)})}),Object(M.jsx)(Ie.a,{transition:t?Ee:Le,children:Object(M.jsx)(ve.a.div,{_dragY:x,animate:t?qe:Be,className:"d-card-content-container ".concat(t&&"open"),drag:!!t&&"y",dragConstraints:w,onDragEnd:S,ref:g,style:{y:x},children:Object(M.jsxs)(ve.a.div,{animate:t?qe:Be,className:"d-card-content",layout:!0,children:[Object(M.jsx)(_e.a,{open:m,style:{zIndex:1,position:"absolute"}}),Object(M.jsx)(He,{isSelected:t,src:d}),Object(M.jsx)(ln,{isSelected:t,title:o}),Object(M.jsx)(Re,{description:l,painterInfo:n?"":j}),n&&Object(M.jsxs)("span",{className:"p-fluid d-flex justify-content-around mx-1 my-3",children:[Object(M.jsx)(B.Button,{className:"mx-1 p-button-rounded p-button-text p-button-lg d-inline-block",icon:"pi pi-pencil",label:"Edit",onClick:function(){return f.replace("/edit/".concat(s))}}),Object(M.jsx)(B.Button,{className:"mx-1 p-button-rounded p-button-text p-button-danger p-button-lg d-inline-block",icon:"pi pi-trash",label:"Delete",onClick:function(){n(),f.replace("/my-drawings")}})]})]})})}),Object(M.jsxs)("div",{children:[!t&&Object(M.jsx)(i.b,{className:"d-card-open-link",to:"".concat(y,"/").concat(s)}),!t&&Object(M.jsx)(ve.a.div,{animate:{opacity:1,scale:m?.85:.75},className:"speedDial-container",initial:{opacity:0,scale:.2,transformOrigin:"95%"},transition:{delay:m?0:.7,type:"spring",stiffness:150,damping:11},children:Object(M.jsx)(on,{basePath:y,dataUrl:d,drawingNumber:u,emitClose:function(){return h(!1)},emitFavoriteAction:r,emitOpen:function(){return h(!0)},history:f,id:s})})]})]})}),(function(e,t){return e.isSelected===t.isSelected})),un=function(e){var t=e.drawings,n=e.emitDelete,r=e.emitFavoriteAction,i=Object(c.i)("/my-drawings/:id");return Object(M.jsx)("ul",{className:"d-card-list",children:t.map((function(e,t){return Object(a.createElement)(dn,Object(p.a)(Object(p.a)({isSelected:(null===i||void 0===i?void 0:i.params.id)===e._id},e),{},{key:e._id,onDelete:function(){return n(e._id,t)},onFavoriteAction:function(t){return r(e.drawingNumber,t)}}))}))})},jn=function(e){var t=e.drawings,n=e.emitFavoriteAction,r=Object(c.i)("/my-favorites/:id");return Object(M.jsx)("ul",{className:"d-card-list",children:t.map((function(e){return Object(a.createElement)(dn,Object(p.a)(Object(p.a)({isSelected:(null===r||void 0===r?void 0:r.params.id)===e._id},e),{},{key:e._id,onFavoriteAction:function(t){n(e.drawingNumber,t)}}))}))})},bn=(n(238),function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={drawings:[],favorites:[],loading:!0},e.handleDeleteDrawing=function(){var t=Object(x.a)(f.a.mark((function t(n,a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.drawings,t.prev=1,e.setState({drawings:Object(G.a)(r).filter((function(e,t){return t!==a}))}),t.next=5,ie(n);case 5:e.getData(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({drawings:r}),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleFavorite=function(){var t=Object(x.a)(f.a.mark((function t(n){var a,r,i,c=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=c.length>1&&void 0!==c[1]&&c[1],t.prev=1,!a){t.next=8;break}return t.next=5,A(n);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,z(n);case 10:t.t0=t.sent;case 11:r=t.t0,i=r.data,e.setState({favorites:i.favorites}),t.next=18;break;case 16:t.prev=16,t.t1=t.catch(1);case 18:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"getData",value:function(){var e=Object(x.a)(f.a.mark((function e(){var t,n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae();case 3:return t=e.sent,n=t.data,e.next=7,T();case 7:a=e.sent,r=a.data.favorites,n.length?this.setState({loading:!1,drawings:n,favorites:r}):this.setState({loading:!1,drawings:[]}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.drawings,a=t.loading,r=t.favorites;return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(fe,{titleText:"Drawing Collection"}),Object(M.jsxs)("div",{className:"my-4 col-12 text-center",children:[Object(M.jsx)("h6",{children:"Your drawing Collection"}),Object(M.jsx)("div",{className:"row drawingListContainer",children:n.length?Object(M.jsx)(ke.Provider,{value:r,children:Object(M.jsx)(un,{drawings:n,emitDelete:function(t,n){return e.handleDeleteDrawing(t,n)},emitFavoriteAction:function(t,n){return e.handleFavorite(t,n)}})}):Object(M.jsxs)("div",{className:"mx-auto ".concat(a?"text-info":""),children:[a?"LOADING":"No drawings yet","..."]})}),Object(M.jsx)(i.b,{className:"btn btn-info mt-2",to:"/create-drawing",children:"Create a new drawing"})]})]})}}]),n}(a.Component)),pn=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={drawings:[],favorites:[],loading:!0},e.handleFavorite=function(){var t=Object(x.a)(f.a.mark((function t(n){var a,r,i,c,s=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=s.length>1&&void 0!==s[1]&&s[1],r=e.state.drawings,t.prev=2,!a){t.next=9;break}return t.next=6,A(n);case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,z(n);case 11:t.t0=t.sent;case 12:i=t.t0,c=i.data,e.setState({favorites:c.favorites,drawings:Object(G.a)(r).filter((function(e){return e.drawingNumber!==n}))}),t.next=19;break;case 17:t.prev=17,t.t1=t.catch(2);case 19:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"getData",value:function(){var e=Object(x.a)(f.a.mark((function e(){var t,n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T();case 3:return t=e.sent,n=t.data.favorites,e.next=7,i=n,N.get("".concat(v.a,"/users/drawings?numbers=").concat(i.toString()));case 7:a=e.sent,r=a.data,console.log(r),r.length?this.setState({loading:!1,drawings:r,favorites:n}):this.setState({loading:!1,drawings:[]}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}var i}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.drawings,a=t.loading,r=t.favorites;return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(fe,{titleText:"Favorite Drawing Collection"}),Object(M.jsxs)("div",{className:"my-4 col-12 text-center",children:[Object(M.jsx)("h6",{children:"Your Favorites"}),Object(M.jsx)("div",{className:"row drawingListContainer",children:n.length?Object(M.jsx)(ke.Provider,{value:r,children:Object(M.jsx)(jn,{drawings:n,emitFavoriteAction:function(t,n){return e.handleFavorite(t,n)}})}):Object(M.jsxs)("div",{className:"mx-auto ".concat(a?"text-info":""),children:[a?"LOADING":"No favorites yet","..."]})})]})]})}}]),n}(a.Component),mn=function(){return Object(M.jsxs)("p",{className:"pt-3 text-center text-white",children:["PixelHub ",Object(M.jsx)("i",{className:"fas fa-paint-brush"})," App \xa9"," ",(new Date).getFullYear()]})},hn=n(266),fn=function(e){var t=e.user,n=Object(c.g)(),a=[{command:function(e){e.originalEvent.preventDefault(),n.push("/")},template:function(e,t){var n=e.target;return Object(M.jsxs)("a",{"aria-haspopup":"false",className:t.className,href:"/",onClick:t.onClick,role:"menuitem",tabIndex:0,target:n,children:["PixelHub ",Object(M.jsx)("i",{className:"fas fa-paint-brush"})," App"]})}},{label:"Home",icon:"pi pi-fw pi-home",command:function(){return n.push("/")}},{label:"About",icon:"pi pi-fw pi-info-circle",command:function(){return n.push("/about")}},{label:"Studio",icon:"pi pi-fw pi-palette",style:{display:t?"":"none"},items:[{label:"Create Drawing",icon:"pi pi-fw pi-image",command:function(){return n.push("/create-drawing")}},{label:"My Drawings",icon:"pi pi-fw pi-images",command:function(){return n.push("/my-drawings")}},{label:"My favorites",icon:"pi pi-fw pi-star",command:function(){return n.push("/my-favorites")}}]},{label:"Account",icon:"pi pi-fw pi-user",items:[{label:"Sign In",icon:"pi pi-fw pi-sign-in",style:{display:t?"none":""},command:function(){return n.push("/sign-in")}},{label:"Sign Up",icon:"pi pi-fw pi-user-plus",style:{display:t?"none":""},command:function(){return n.push("/sign-up")}},{label:"Sign Up as a Painter",icon:"fas fa-paint-brush",style:{display:(null===t||void 0===t?void 0:t.painter)?"none":"",fontSize:14},command:function(){return n.push("/painter-sign-up")}},{label:"Logout",icon:"pi pi-fw pi-sign-out",style:{display:t?"":"none"},command:function(){return n.push("/logout")}}]}],r=Object(M.jsx)(be.InputText,{placeholder:"Search",type:"text"});return Object(M.jsx)("div",{children:Object(M.jsx)(hn.Menubar,{end:r,model:a})})},xn=function(){return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(fe,{titleText:"About PixelHub"}),Object(M.jsx)("div",{className:"row",children:Object(M.jsx)("div",{className:"col-12",children:Object(M.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Soluta at et rerum? Quisquam, voluptas autem suscipit modi repudiandae possimus, commodi totam eos illo accusantium vel minima velit atque veniam doloribus!"})})})]})},On=function(){return Object(M.jsxs)("div",{className:"container text-center",children:[Object(M.jsx)(fe,{titleText:"PixelHub Home Page"}),Object(M.jsx)("div",{className:"row",children:Object(M.jsx)("div",{className:"col-12",children:Object(M.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Soluta at et rerum? Quisquam, voluptas autem suscipit modi repudiandae possimus, commodi totam eos illo accusantium vel minima velit atque veniam doloribus!"})})})]})},vn=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){I(),window.location.href="/"}},{key:"render",value:function(){return null}}]),n}(a.Component),gn=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={formData:{name:"",password:"",email:""},errors:{}},e.schema={email:q.a.string().required().email({tlds:{allow:!1}}).min(5),password:q.a.string().required().min(6),name:q.a.string().required().min(2)},e.doSubmit=Object(x.a)(f.a.mark((function t(){var n,a,r,i,c,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.errors,r=n.formData,i=Object(p.a)(Object(p.a)({},r),{},{painter:!0}),t.prev=2,t.next=5,N.post("".concat(v.a,"/users"),i);case 5:return c=i.email,s=i.password,t.next=8,C({email:c,password:s});case 8:b.b.success("You have successfully registered painter account!!",{position:"top-center",autoClose:2500}),setTimeout((function(){window.location.href="/create-drawing"}),2500),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),t.t0.response&&400===t.t0.response.status&&(b.b.error(t.t0.response.data,{position:"top-center",autoClose:65*t.t0.response.data.length}),(a={name:"",password:"",email:""})[t.t0.response.data.split('"')[1]]=t.t0.response.data,e.setState({errors:a,formData:r}));case 15:case"end":return t.stop()}}),t,null,[[2,12]])}))),e}return Object(d.a)(n,[{key:"render",value:function(){return _()?Object(M.jsx)(c.a,{to:"/"}):Object(M.jsxs)("div",{className:"sub-main",children:[Object(M.jsx)(fe,{titleText:"Painter Registration Form"}),Object(M.jsx)("div",{className:"row text-center",children:Object(M.jsx)("div",{className:"col-12",children:Object(M.jsx)("p",{children:"Open a new painter account"})})}),Object(M.jsx)("div",{className:"mx-2",children:Object(M.jsx)("div",{className:"px-4 m-auto p-card form-container",children:Object(M.jsxs)("form",{className:"p-card-content",noValidate:!0,onSubmit:this.handleSubmit,children:[this.renderInput("email","Email","email"),this.renderInput("name","Name"),this.renderInput("password","Password","password",{feedback:!0}),this.renderButton("Next")]})})})]})}}]),n}(R),wn=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={formData:{password:"",email:""},errors:{}},e.schema={email:q.a.string().required().email({tlds:{allow:!1}}).min(5).label("Email"),password:q.a.string().required().min(6).label("Password")},e.doSubmit=Object(x.a)(f.a.mark((function t(){var n,a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.errors,r=n.formData,t.prev=1,t.next=4,C(r);case 4:setTimeout((function(){window.location.href="/"}),2200),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.response&&400===t.t0.response.status&&(b.b.error(t.t0.response.data,{position:"top-center",autoClose:65*t.t0.response.data.length}),(a={name:"",password:"",email:""})[t.t0.response.data.split('"')[1]]=t.t0.response.data,e.setState({errors:a,formData:r}));case 10:case"end":return t.stop()}}),t,null,[[1,7]])}))),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){_()||localStorage.clear()}},{key:"render",value:function(){return _()?Object(M.jsx)(c.a,{to:"/"}):Object(M.jsxs)("div",{className:"container sub-main",children:[Object(M.jsx)(fe,{titleText:"Sign in with your PixelHub account"}),Object(M.jsx)("div",{className:"row text-center",children:Object(M.jsx)("div",{className:"col-12",children:Object(M.jsx)("p",{children:"You can open a new account for free"})})}),Object(M.jsx)("div",{className:"mx-2",children:Object(M.jsx)("div",{className:"px-4 m-auto p-card form-container",children:Object(M.jsxs)("form",{className:"p-card-content",noValidate:!0,onSubmit:this.handleSubmit,children:[this.renderInput("email","Email","email"),this.renderInput("password","Password","password",{feedback:!1}),this.renderButton("Sign In")]})})})]})}}]),n}(R),yn=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={formData:{name:"",password:"",email:""},errors:{}},e.schema={email:q.a.string().required().email({tlds:{allow:!1}}).min(5),password:q.a.string().required().min(6),name:q.a.string().required().min(2)},e.doSubmit=Object(x.a)(f.a.mark((function t(){var n,a,r,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.errors,r=n.formData,i=Object(p.a)(Object(p.a)({},r),{},{painter:!1}),t.prev=2,t.next=5,N.post("".concat(v.a,"/users"),i);case 5:e.props.history.replace("/sign-in"),b.b.success("You have successfully signed up!!",{position:"top-center",autoClose:4e3}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),t.t0.response&&400===t.t0.response.status&&(b.b.error(t.t0.response.data,{position:"top-center",autoClose:65*t.t0.response.data.length}),(a={name:"",password:"",email:""})[t.t0.response.data.split('"')[1]]=t.t0.response.data,e.setState({errors:a,formData:r}));case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),e}return Object(d.a)(n,[{key:"render",value:function(){return _()?Object(M.jsx)(c.a,{to:"/"}):Object(M.jsxs)("div",{className:"container sub-main",children:[Object(M.jsx)(fe,{titleText:"Signup for PixelHub"}),Object(M.jsx)("div",{className:"row text-center",children:Object(M.jsx)("div",{className:"col-12",children:Object(M.jsx)("p",{children:"You can open a new account for free"})})}),Object(M.jsx)("div",{className:"mx-2",children:Object(M.jsx)("div",{className:"px-4 m-auto p-card form-container",children:Object(M.jsxs)("form",{className:"p-card-content",noValidate:!0,onSubmit:this.handleSubmit,children:[this.renderInput("email","Email","email"),this.renderInput("name","Name"),this.renderInput("password","Password","password",{feedback:!0}),this.renderButton("Sign Up")]})})})]})}}]),n}(R),Sn=(n(469),function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=_();this.setState({user:e})}},{key:"render",value:function(){var e=this.state.user;return Object(M.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[Object(M.jsx)(b.a,{}),Object(M.jsx)("header",{children:Object(M.jsx)(fn,{user:e})}),Object(M.jsx)("main",{className:"container-fluid flex-fill",style:{padding:0},children:Object(M.jsxs)(c.d,{children:[Object(M.jsx)(F,{component:Ne,painter:"true",path:"/edit/:id"}),Object(M.jsx)(F,{component:Se,painter:"true",path:"/create-drawing"}),Object(M.jsx)(F,{component:bn,painter:"true",path:"/my-drawings"}),Object(M.jsx)(c.b,{component:pn,path:"/my-favorites"}),Object(M.jsx)(c.b,{component:yn,path:"/sign-up"}),Object(M.jsx)(c.b,{component:gn,path:"/painter-sign-up"}),Object(M.jsx)(c.b,{component:wn,path:"/sign-in"}),Object(M.jsx)(c.b,{component:vn,path:"/logout"}),Object(M.jsx)(c.b,{component:xn,path:"/about"}),Object(M.jsx)(c.b,{component:On,exact:!0,path:"/"}),Object(M.jsx)(c.a,{to:"/"})," "]})}),Object(M.jsx)("footer",{children:Object(M.jsx)(mn,{})})]})}}]),n}(a.Component)),Nn=n(267);var kn=function(){var e=new URLSearchParams(Object(c.h)().search).get("data");return Object(M.jsxs)("div",{style:{height:"100vh",display:"grid",justifyContent:"center",alignContent:"center"},children:[Object(M.jsxs)(Nn.a,{children:[Object(M.jsx)("title",{children:"pixelhub drawing"}),Object(M.jsx)("meta",{content:"pixelhub drawing",property:"og:title"}),Object(M.jsx)("meta",{content:"website",property:"og:type"}),Object(M.jsx)("meta",{content:"nevehallon.github.io/Pixel-Paint/#/",property:"og:site_name"}),Object(M.jsx)("meta",{content:"en_US",property:"og:locale"}),Object(M.jsx)("meta",{content:"pixelhub drawing",property:"article:author"}),Object(M.jsx)("meta",{content:"https://nevehallon.github.io/Pixel-Paint/#/public-images/?data=".concat(encodeURIComponent(e)),property:"og:image"}),Object(M.jsx)("meta",{content:"summary",name:"twitter:card"}),Object(M.jsx)("meta",{content:"pixelhub drawing",name:"twitter:title"}),Object(M.jsx)("meta",{content:"https://nevehallon.github.io/Pixel-Paint/#/public-images/?data=".concat(encodeURIComponent(e)),name:"twitter:image"}),Object(M.jsx)("link",{href:"nevehallon.github.io/Pixel-Paint/#/",rel:"me",type:"text/html"})]}),Object(M.jsx)("img",{alt:"drawing",src:e,style:{background:"#fff"}})]})},_n=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,589)).then((function(t){var n=t.getCLS,a=t.getFCP,r=t.getFID,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};n(470),n(471),n(472),n(473),n(474),n(475),n(476);o.a.ripple=!0,Object(r.render)(Object(M.jsx)(a.StrictMode,{children:Object(M.jsx)(i.a,{children:Object(M.jsxs)(c.d,{children:[Object(M.jsx)(c.b,{component:kn,path:"/public-images"}),Object(M.jsx)(c.b,{path:"*",children:Object(M.jsx)(Sn,{})})]})})}),document.getElementById("root")),_n()}},[[477,1,2]]]);
//# sourceMappingURL=main.6941e089.chunk.js.map